

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>chempy.util package &mdash; chempy 0.5.6 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="chempy 0.5.6 documentation" href="index.html"/>
        <link rel="up" title="chempy package" href="chempy.html"/>
        <link rel="prev" title="chempy.thermodynamics package" href="chempy.thermodynamics.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> chempy
          

          
          </a>

          
            
            
              <div class="version">
                0.5.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="chempy.html">chempy package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="chempy.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="chempy.electrochemistry.html">chempy.electrochemistry package</a></li>
<li class="toctree-l3"><a class="reference internal" href="chempy.kinetics.html">chempy.kinetics package</a></li>
<li class="toctree-l3"><a class="reference internal" href="chempy.printing.html">chempy.printing package</a></li>
<li class="toctree-l3"><a class="reference internal" href="chempy.properties.html">chempy.properties package</a></li>
<li class="toctree-l3"><a class="reference internal" href="chempy.thermodynamics.html">chempy.thermodynamics package</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">chempy.util package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-chempy.util.arithmeticdict">chempy.util.arithmeticdict module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-chempy.util.bkh">chempy.util.bkh module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-chempy.util.deprecation">chempy.util.deprecation module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-chempy.util.graph">chempy.util.graph module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-chempy.util.numutil">chempy.util.numutil module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-chempy.util.parsing">chempy.util.parsing module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-chempy.util.periodic">chempy.util.periodic module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-chempy.util.pyutil">chempy.util.pyutil module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-chempy.util.regression">chempy.util.regression module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-chempy.util.stoich">chempy.util.stoich module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-chempy.util.table">chempy.util.table module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-chempy.util.testing">chempy.util.testing module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="chempy.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="chempy.html#module-chempy.arrhenius">chempy.arrhenius module</a></li>
<li class="toctree-l2"><a class="reference internal" href="chempy.html#module-chempy.chemistry">chempy.chemistry module</a></li>
<li class="toctree-l2"><a class="reference internal" href="chempy.html#module-chempy.debye_huckel">chempy.debye_huckel module</a></li>
<li class="toctree-l2"><a class="reference internal" href="chempy.html#module-chempy.einstein_smoluchowski">chempy.einstein_smoluchowski module</a></li>
<li class="toctree-l2"><a class="reference internal" href="chempy.html#module-chempy.electrolytes">chempy.electrolytes module</a></li>
<li class="toctree-l2"><a class="reference internal" href="chempy.html#module-chempy.equilibria">chempy.equilibria module</a></li>
<li class="toctree-l2"><a class="reference internal" href="chempy.html#module-chempy.eyring">chempy.eyring module</a></li>
<li class="toctree-l2"><a class="reference internal" href="chempy.html#module-chempy.henry">chempy.henry module</a></li>
<li class="toctree-l2"><a class="reference internal" href="chempy.html#module-chempy.reactionsystem">chempy.reactionsystem module</a></li>
<li class="toctree-l2"><a class="reference internal" href="chempy.html#module-chempy.symbolic">chempy.symbolic module</a></li>
<li class="toctree-l2"><a class="reference internal" href="chempy.html#module-chempy.units">chempy.units module</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">chempy</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="chempy.html">chempy package</a> &raquo;</li>
        
      <li>chempy.util package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/bjodah/chempy/blob/v0.5.6/doc/chempy.util.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-chempy.util">
<span id="chempy-util-package"></span><h1>chempy.util package<a class="headerlink" href="#module-chempy.util" title="Permalink to this headline">¶</a></h1>
<p>This package collects utility functions used throughout the <code class="docutils literal"><span class="pre">ChemPy</span></code> package.</p>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-chempy.util.arithmeticdict">
<span id="chempy-util-arithmeticdict-module"></span><h2>chempy.util.arithmeticdict module<a class="headerlink" href="#module-chempy.util.arithmeticdict" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="chempy.util.arithmeticdict.ArithmeticDict">
<em class="property">class </em><code class="descclassname">chempy.util.arithmeticdict.</code><code class="descname">ArithmeticDict</code><a class="reference internal" href="_modules/chempy/util/arithmeticdict.html#ArithmeticDict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.arithmeticdict.ArithmeticDict" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">collections.defaultdict</span></code></p>
<p>A dictionary which supports arithmetics</p>
<p>Subclassed from defaultdict, with support for addition, subtraction,
multiplication and division. If other term/factor has a <code class="xref py py-meth docutils literal"><span class="pre">keys()</span></code> method
the arithmetics are performed on a key per key basis. If <code class="xref py py-meth docutils literal"><span class="pre">keys()</span></code> is
missing, the operation is broadcasted onto all values.
Nonexisting keys are interpreted to signal a zero.</p>
<p><code class="docutils literal"><span class="pre">__eq__</span></code> ignores values equal to <code class="docutils literal"><span class="pre">self.default_factory()</span></code></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d1</span> <span class="o">=</span> <span class="n">ArithmeticDict</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d2</span> <span class="o">=</span> <span class="n">ArithmeticDict</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mf">7.0</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">d1</span> <span class="o">+</span> <span class="n">d2</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mf">2.</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mf">8.</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mf">7.</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="mf">0.</span><span class="p">}</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">d1</span> <span class="o">*</span> <span class="n">d1</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mf">9.0</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">d1</span> <span class="o">*</span> <span class="n">d2</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">15</span><span class="p">}</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d1</span><span class="o">*</span><span class="mi">2</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">}</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">d1</span> <span class="o">/</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">11</span><span class="p">})[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mf">3.</span><span class="o">/</span><span class="mi">11</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d2</span><span class="o">/</span><span class="mi">3</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mf">5.</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mf">7.</span><span class="o">/</span><span class="mi">3</span><span class="p">}</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="method">
<dt id="chempy.util.arithmeticdict.ArithmeticDict.all_non_negative">
<code class="descname">all_non_negative</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/arithmeticdict.html#ArithmeticDict.all_non_negative"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.arithmeticdict.ArithmeticDict.all_non_negative" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="chempy.util.arithmeticdict.ArithmeticDict.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/arithmeticdict.html#ArithmeticDict.copy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.arithmeticdict.ArithmeticDict.copy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="chempy.util.arithmeticdict.ArithmeticDict.isclose">
<code class="descname">isclose</code><span class="sig-paren">(</span><em>other</em>, <em>rtol=1e-12</em>, <em>atol=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/arithmeticdict.html#ArithmeticDict.isclose"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.arithmeticdict.ArithmeticDict.isclose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-chempy.util.bkh">
<span id="chempy-util-bkh-module"></span><h2>chempy.util.bkh module<a class="headerlink" href="#module-chempy.util.bkh" title="Permalink to this headline">¶</a></h2>
<p>Utilities for plotting with <a class="reference external" href="https://bokeh.pydata.org">bokeh</a>.</p>
<dl class="function">
<dt id="chempy.util.bkh.integration_with_sliders">
<code class="descclassname">chempy.util.bkh.</code><code class="descname">integration_with_sliders</code><span class="sig-paren">(</span><em>rsys</em>, <em>tend</em>, <em>c0</em>, <em>parameters</em>, <em>fig_kwargs=None</em>, <em>slider_kwargs=None</em>, <em>conc_bounds=None</em>, <em>x_axis_type='linear'</em>, <em>y_axis_type='linear'</em>, <em>integrate_kwargs=None</em>, <em>odesys_extra=None</em>, <em>get_odesys_kw=None</em>, <em>integrate=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/bkh.html#integration_with_sliders"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.bkh.integration_with_sliders" title="Permalink to this definition">¶</a></dt>
<dd><p>rsys : ReactionSystem
tend : float like
c0 : dict</p>
<blockquote>
<div>Initial concentrations.</div></blockquote>
<dl class="docutils">
<dt>parameters <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd>Parameter values.</dd>
<dt>fig_kwargs <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd>Keyword-arguments passed to bokeh’s <code class="docutils literal"><span class="pre">Figure</span></code>.</dd>
<dt>slider_kwargs <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd>Keyword-arguments passed to bokeh’s <code class="docutils literal"><span class="pre">Slider</span></code>.</dd>
<dt>conc_bounds <span class="classifier-delimiter">:</span> <span class="classifier">dict of dicts</span></dt>
<dd>Mapping substance key to dict of bounds (‘start’, ‘end’, ‘step’).</dd>
</dl>
<p>x_axis_type : str
y_axis_type : str
integrate_kwargs : dict</p>
<blockquote>
<div>Keyword-arguments passed to integrate.</div></blockquote>
<dl class="docutils">
<dt>odesys_extra <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd>If odesys &amp; extra have already been generated (avoids call to <code class="docutils literal"><span class="pre">get_odesys</span></code>).</dd>
<dt>get_odesys_kw <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd>Keyword-arguments passed to <code class="docutils literal"><span class="pre">get_odesys</span></code>.</dd>
<dt>integrate <span class="classifier-delimiter">:</span> <span class="classifier">callback</span></dt>
<dd>Defaults to <code class="docutils literal"><span class="pre">odesys.integrate</span></code>.</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-chempy.util.deprecation">
<span id="chempy-util-deprecation-module"></span><h2>chempy.util.deprecation module<a class="headerlink" href="#module-chempy.util.deprecation" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="chempy.util.deprecation.Deprecation">
<em class="property">class </em><code class="descclassname">chempy.util.deprecation.</code><code class="descname">Deprecation</code><span class="sig-paren">(</span><em>last_supported_version=None</em>, <em>will_be_missing_in=None</em>, <em>use_instead=None</em>, <em>issue=None</em>, <em>issues_url=None</em>, <em>warning=&lt;class 'DeprecationWarning'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/deprecation.html#Deprecation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.deprecation.Deprecation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Decorator factory for deprecating functions or classes.</p>
<p>This class represent deprecations of functions or classes and is designed
to be used with the <code class="docutils literal"><span class="pre">warnings</span></code> library.</p>
<dl class="docutils">
<dt>last_supported_version <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>Version string, e.g. <code class="docutils literal"><span class="pre">'0.2.1'</span></code>.</dd>
<dt>will_be_missing_in <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>Version string, e.g. <code class="docutils literal"><span class="pre">'0.3.0'</span></code>.</dd>
<dt>use_instead <span class="classifier-delimiter">:</span> <span class="classifier">object or str, optional</span></dt>
<dd>Function or class to use instead or descriptive string.</dd>
</dl>
<p>issue : str, optional
issues_url : callback, optional</p>
<blockquote>
<div>Converts issue to url, e.g. <code class="docutils literal"><span class="pre">lambda</span> <span class="pre">s:</span> <span class="pre">'https://github.com/user/repo/issues/%s/'</span> <span class="pre">%</span> <span class="pre">s.lstrip('gh-')</span></code>.</div></blockquote>
<dl class="docutils">
<dt>warning: DeprecationWarning, optional</dt>
<dd>Any subclass of DeprecationWarning, tip: you may invoke:
<code class="docutils literal"><span class="pre">warnings.simplefilter('once',</span> <span class="pre">MyWarning)</span></code> at module init.</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">,</span> <span class="ne">DeprecationWarning</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@Deprecation</span><span class="p">()</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="mi">1</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">()</span>  
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">DeprecationWarning</span>: <span class="n">f is deprecated.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@Deprecation</span><span class="p">(</span><span class="n">last_supported_version</span><span class="o">=</span><span class="s1">&#39;0.4.0&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">some_old_function</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="o">-</span> <span class="n">x</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Deprecation</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">some_old_function</span><span class="p">)</span><span class="o">.</span><span class="n">last_supported_version</span>
<span class="go">&#39;0.4.0&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@Deprecation</span><span class="p">(</span><span class="n">will_be_missing_in</span><span class="o">=</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">ClumsyClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Deprecation</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">ClumsyClass</span><span class="p">)</span><span class="o">.</span><span class="n">will_be_missing_in</span>
<span class="go">&#39;1.0&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">warnings</span><span class="o">.</span><span class="n">resetwarnings</span><span class="p">()</span>
</pre></div>
</div>
<p><code class="xref py py-class docutils literal"><span class="pre">DeprecationWarning</span></code> is ignored by default. Use custom warning
and filter appropriately. Alternatively, run python with <code class="docutils literal"><span class="pre">-W</span></code> flag or set
the appropriate environment variable:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ python -c &#39;import warnings as w; w.warn(&quot;X&quot;, DeprecationWarning)&#39;
$ python -Wd -c &#39;import warnings as w; w.warn(&quot;X&quot;, DeprecationWarning)&#39;
-c:1: DeprecationWarning: X
$ export PYTHONWARNINGS=d
$ python -c &#39;import warnings as w; w.warn(&quot;X&quot;, DeprecationWarning)&#39;
-c:1: DeprecationWarning: X
</pre></div>
</div>
<dl class="classmethod">
<dt id="chempy.util.deprecation.Deprecation.inspect">
<em class="property">classmethod </em><code class="descname">inspect</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/deprecation.html#Deprecation.inspect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.deprecation.Deprecation.inspect" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the <a class="reference internal" href="#chempy.util.deprecation.Deprecation" title="chempy.util.deprecation.Deprecation"><code class="xref py py-class docutils literal"><span class="pre">Deprecation</span></code></a> instance of a deprecated function.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-chempy.util.graph">
<span id="chempy-util-graph-module"></span><h2>chempy.util.graph module<a class="headerlink" href="#module-chempy.util.graph" title="Permalink to this headline">¶</a></h2>
<p>Convenince functions for representing reaction systems as graphs.</p>
<dl class="function">
<dt id="chempy.util.graph.rsys2dot">
<code class="descclassname">chempy.util.graph.</code><code class="descname">rsys2dot</code><span class="sig-paren">(</span><em>rsys</em>, <em>tex=False</em>, <em>rprefix='r'</em>, <em>rref0=1</em>, <em>nodeparams='[label=&quot;{}&quot; shape=diamond]'</em>, <em>colors=('maroon'</em>, <em>'darkgreen')</em>, <em>penwidths=None</em>, <em>include_inactive=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/graph.html#rsys2dot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.graph.rsys2dot" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns list of lines of DOT (graph description language)
formated graph.</p>
<p>rsys: ReactionSystem
tex: bool (default False)</p>
<blockquote>
<div>If set True, output will be LaTeX formated</div></blockquote>
<p>(Substance need to have latex_name attribute set)
rprefix: string</p>
<blockquote>
<div>Reaction enumeration prefix, default: r</div></blockquote>
<dl class="docutils">
<dt>rref0: integer</dt>
<dd>Reaction enumeration inital counter value, default: 1</dd>
<dt>nodeparams: string</dt>
<dd>DOT formated param list, default: [label={} shape=diamond]</dd>
</dl>
<p>list of lines of DOT representation of the graph representation.</p>
</dd></dl>

<dl class="function">
<dt id="chempy.util.graph.rsys2graph">
<code class="descclassname">chempy.util.graph.</code><code class="descname">rsys2graph</code><span class="sig-paren">(</span><em>rsys</em>, <em>fname</em>, <em>output_dir=None</em>, <em>prog=None</em>, <em>save=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/graph.html#rsys2graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.graph.rsys2graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to call <cite>rsys2dot</cite> and write output to file
and render the graph</p>
<p>rsys: ReactionSystem
fname: str</p>
<blockquote>
<div>filename</div></blockquote>
<dl class="docutils">
<dt>output_dir: str (optional)</dt>
<dd>path to directory (default: temporary directory)</dd>
<dt>prog: str (optional)</dt>
<dd>default: ‘dot’</dd>
<dt>save: bool</dt>
<dd>removes temporary directory if False, default: False</dd>
<dt>**kwargs:</dt>
<dd>parameters to pass along to <cite>rsys2dot</cite></dd>
</dl>
<dl class="docutils">
<dt>str</dt>
<dd>Outpath</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rsys2graph</span><span class="p">(</span><span class="n">rsys</span><span class="p">,</span> <span class="n">sbstncs</span><span class="p">,</span> <span class="s1">&#39;/tmp/out.png&#39;</span><span class="p">)</span>  
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-chempy.util.numutil">
<span id="chempy-util-numutil-module"></span><h2>chempy.util.numutil module<a class="headerlink" href="#module-chempy.util.numutil" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="chempy.util.numutil.broadcast_stack">
<code class="descclassname">chempy.util.numutil.</code><code class="descname">broadcast_stack</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/numutil.html#broadcast_stack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.numutil.broadcast_stack" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-chempy.util.parsing">
<span id="chempy-util-parsing-module"></span><h2>chempy.util.parsing module<a class="headerlink" href="#module-chempy.util.parsing" title="Permalink to this headline">¶</a></h2>
<p>Functions for chemical formulae and reactions</p>
<dl class="function">
<dt id="chempy.util.parsing.formula_to_composition">
<code class="descclassname">chempy.util.parsing.</code><code class="descname">formula_to_composition</code><span class="sig-paren">(</span><em>formula</em>, <em>prefixes=None</em>, <em>suffixes=('(s)'</em>, <em>'(l)'</em>, <em>'(g)'</em>, <em>'(aq)')</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/parsing.html#formula_to_composition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.parsing.formula_to_composition" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse composition of formula representing a chemical formula</p>
<p>Composition is represented as a dict mapping int -&gt; int (atomic
number -&gt; multiplicity). “Atomic number” 0 represents net charge.</p>
<dl class="docutils">
<dt>formula: str</dt>
<dd>Chemical formula, e.g. ‘H2O’, ‘Fe+3’, ‘Cl-‘</dd>
<dt>prefixes: iterable strings</dt>
<dd>Prefixes to ignore, e.g. (‘.’, ‘alpha-‘)</dd>
<dt>suffixes: tuple of strings</dt>
<dd>Suffixes to ignore, e.g. (‘(g)’, ‘(s)’)</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">formula_to_composition</span><span class="p">(</span><span class="s1">&#39;NH4+&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formula_to_composition</span><span class="p">(</span><span class="s1">&#39;.NHO-(aq)&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formula_to_composition</span><span class="p">(</span><span class="s1">&#39;Na2CO3.7H2O&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="mi">11</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">14</span><span class="p">}</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="chempy.util.parsing.formula_to_html">
<code class="descclassname">chempy.util.parsing.</code><code class="descname">formula_to_html</code><span class="sig-paren">(</span><em>formula</em>, <em>prefixes=None</em>, <em>infixes=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/parsing.html#formula_to_html"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.parsing.formula_to_html" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert formula string to html string representation</p>
<dl class="docutils">
<dt>formula <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Chemical formula, e.g. ‘H2O’, ‘Fe+3’, ‘Cl-‘</dd>
<dt>prefixes <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd>Prefix transformations, default: greek letters and .</dd>
<dt>infixes <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd>Infix transformations, default: .</dd>
<dt>suffixes <span class="classifier-delimiter">:</span> <span class="classifier">tuple of strings</span></dt>
<dd>Suffixes to keep, e.g. (‘(g)’, ‘(s)’)</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">formula_to_html</span><span class="p">(</span><span class="s1">&#39;NH4+&#39;</span><span class="p">)</span>
<span class="go">&#39;NH&lt;sub&gt;4&lt;/sub&gt;&lt;sup&gt;+&lt;/sup&gt;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formula_to_html</span><span class="p">(</span><span class="s1">&#39;Fe(CN)6+2&#39;</span><span class="p">)</span>
<span class="go">&#39;Fe(CN)&lt;sub&gt;6&lt;/sub&gt;&lt;sup&gt;2+&lt;/sup&gt;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formula_to_html</span><span class="p">(</span><span class="s1">&#39;Fe(CN)6+2(aq)&#39;</span><span class="p">)</span>
<span class="go">&#39;Fe(CN)&lt;sub&gt;6&lt;/sub&gt;&lt;sup&gt;2+&lt;/sup&gt;(aq)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formula_to_html</span><span class="p">(</span><span class="s1">&#39;.NHO-(aq)&#39;</span><span class="p">)</span>
<span class="go">&#39;&amp;sdot;NHO&lt;sup&gt;-&lt;/sup&gt;(aq)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formula_to_html</span><span class="p">(</span><span class="s1">&#39;alpha-FeOOH(s)&#39;</span><span class="p">)</span>
<span class="go">&#39;&amp;alpha;-FeOOH(s)&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="chempy.util.parsing.formula_to_latex">
<code class="descclassname">chempy.util.parsing.</code><code class="descname">formula_to_latex</code><span class="sig-paren">(</span><em>formula</em>, <em>prefixes=None</em>, <em>infixes=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/parsing.html#formula_to_latex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.parsing.formula_to_latex" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert formula string to latex representation</p>
<dl class="docutils">
<dt>formula: str</dt>
<dd>Chemical formula, e.g. ‘H2O’, ‘Fe+3’, ‘Cl-‘</dd>
<dt>prefixes: dict</dt>
<dd>Prefix transofmrations, default: greek letters and .</dd>
<dt>infixes: dict</dt>
<dd>Infix transformations, default: .</dd>
<dt>suffixes: iterable of str</dt>
<dd>What suffixes not to interpret, default: (s), (l), (g), (aq)</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">formula_to_latex</span><span class="p">(</span><span class="s1">&#39;NH4+&#39;</span><span class="p">)</span>
<span class="go">&#39;NH_{4}^{+}&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formula_to_latex</span><span class="p">(</span><span class="s1">&#39;Fe(CN)6+2&#39;</span><span class="p">)</span>
<span class="go">&#39;Fe(CN)_{6}^{2+}&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formula_to_latex</span><span class="p">(</span><span class="s1">&#39;Fe(CN)6+2(aq)&#39;</span><span class="p">)</span>
<span class="go">&#39;Fe(CN)_{6}^{2+}(aq)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formula_to_latex</span><span class="p">(</span><span class="s1">&#39;.NHO-(aq)&#39;</span><span class="p">)</span>
<span class="go">&#39;^\\bullet NHO^{-}(aq)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formula_to_latex</span><span class="p">(</span><span class="s1">&#39;alpha-FeOOH(s)&#39;</span><span class="p">)</span>
<span class="go">&#39;\\alpha-FeOOH(s)&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="chempy.util.parsing.formula_to_unicode">
<code class="descclassname">chempy.util.parsing.</code><code class="descname">formula_to_unicode</code><span class="sig-paren">(</span><em>formula</em>, <em>prefixes=None</em>, <em>infixes=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/parsing.html#formula_to_unicode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.parsing.formula_to_unicode" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert formula string to unicode string representation</p>
<dl class="docutils">
<dt>formula <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Chemical formula, e.g. ‘H2O’, ‘Fe+3’, ‘Cl-‘</dd>
<dt>prefixes <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd>Prefix transofmrations, default: greek letters and .</dd>
<dt>infixes <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd>Infix transofmrations, default: .</dd>
<dt>suffixes <span class="classifier-delimiter">:</span> <span class="classifier">tuple of strings</span></dt>
<dd>Suffixes to keep, e.g. (‘(g)’, ‘(s)’)</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">formula_to_unicode</span><span class="p">(</span><span class="s1">&#39;NH4+&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="sa">u</span><span class="s1">&#39;NH₄⁺&#39;</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formula_to_unicode</span><span class="p">(</span><span class="s1">&#39;Fe(CN)6+2&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="sa">u</span><span class="s1">&#39;Fe(CN)₆²⁺&#39;</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formula_to_unicode</span><span class="p">(</span><span class="s1">&#39;Fe(CN)6+2(aq)&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="sa">u</span><span class="s1">&#39;Fe(CN)₆²⁺(aq)&#39;</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formula_to_unicode</span><span class="p">(</span><span class="s1">&#39;.NHO-(aq)&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="sa">u</span><span class="s1">&#39;⋅NHO⁻(aq)&#39;</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formula_to_unicode</span><span class="p">(</span><span class="s1">&#39;alpha-FeOOH(s)&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="sa">u</span><span class="s1">&#39;α-FeOOH(s)&#39;</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="chempy.util.parsing.to_reaction">
<code class="descclassname">chempy.util.parsing.</code><code class="descname">to_reaction</code><span class="sig-paren">(</span><em>line</em>, <em>substance_keys</em>, <em>token</em>, <em>Cls</em>, <em>globals_=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/parsing.html#to_reaction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.parsing.to_reaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses a string into a Reaction object and substances</p>
<p>Reac1 + 2 Reac2 + (2 Reac1) -&gt; Prod1 + Prod2; 10**3.7; ref=’doi:12/ab’
Reac1 = Prod1; 2.1;</p>
<dl class="docutils">
<dt>line: str</dt>
<dd>string representation to be parsed</dd>
<dt>substance_keys: iterable of strings</dt>
<dd>Allowed names, e.g. (‘H2O’, ‘H+’, ‘OH-‘)</dd>
<dt>token <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>delimiter token between reactant and product side</dd>
<dt>Cls <span class="classifier-delimiter">:</span> <span class="classifier">class</span></dt>
<dd>e.g. subclass of Reaction</dd>
<dt><a href="#id5"><span class="problematic" id="id6">globals_</span></a>: dict (optional)</dt>
<dd>Globals passed on to <code class="xref py py-func docutils literal"><span class="pre">eval()</span></code>, when <code class="docutils literal"><span class="pre">None</span></code>:
<cite>chempy.units.default_units</cite> is used with ‘chempy’
and ‘default_units’ extra entries.</dd>
</dl>
<p>This function calls <code class="xref py py-func docutils literal"><span class="pre">eval()</span></code>, hence there are severe security concerns
with running this on untrusted data.</p>
</dd></dl>

</div>
<div class="section" id="module-chempy.util.periodic">
<span id="chempy-util-periodic-module"></span><h2>chempy.util.periodic module<a class="headerlink" href="#module-chempy.util.periodic" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="chempy.util.periodic.atomic_number">
<code class="descclassname">chempy.util.periodic.</code><code class="descname">atomic_number</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/periodic.html#atomic_number"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.periodic.atomic_number" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="chempy.util.periodic.mass_from_composition">
<code class="descclassname">chempy.util.periodic.</code><code class="descname">mass_from_composition</code><span class="sig-paren">(</span><em>composition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/periodic.html#mass_from_composition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.periodic.mass_from_composition" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates molecular mass from atomic weights</p>
<dl class="docutils">
<dt>composition: dict</dt>
<dd>Dictionary mapping int (atomic number) to int (coefficient)</dd>
</dl>
<dl class="docutils">
<dt>float</dt>
<dd>molecular weight in atomic mass units</dd>
</dl>
<p>Atomic number 0 denotes charge or “net electron defficiency”</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">mass_from_composition</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="go">&#39;17.01&#39;</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-chempy.util.pyutil">
<span id="chempy-util-pyutil-module"></span><h2>chempy.util.pyutil module<a class="headerlink" href="#module-chempy.util.pyutil" title="Permalink to this headline">¶</a></h2>
<p>General utilities and exceptions.</p>
<dl class="exception">
<dt id="chempy.util.pyutil.ChemPyDeprecationWarning">
<em class="property">exception </em><code class="descclassname">chempy.util.pyutil.</code><code class="descname">ChemPyDeprecationWarning</code><a class="reference internal" href="_modules/chempy/util/pyutil.html#ChemPyDeprecationWarning"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.pyutil.ChemPyDeprecationWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">DeprecationWarning</span></code></p>
</dd></dl>

<dl class="class">
<dt id="chempy.util.pyutil.DeferredImport">
<em class="property">class </em><code class="descclassname">chempy.util.pyutil.</code><code class="descname">DeferredImport</code><span class="sig-paren">(</span><em>modname</em>, <em>arg=None</em>, <em>decorators=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/pyutil.html#DeferredImport"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.pyutil.DeferredImport" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="chempy.util.pyutil.DeferredImport.cache">
<code class="descname">cache</code><a class="headerlink" href="#chempy.util.pyutil.DeferredImport.cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="exception">
<dt id="chempy.util.pyutil.NoConvergence">
<em class="property">exception </em><code class="descclassname">chempy.util.pyutil.</code><code class="descname">NoConvergence</code><a class="reference internal" href="_modules/chempy/util/pyutil.html#NoConvergence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.pyutil.NoConvergence" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="class">
<dt id="chempy.util.pyutil.defaultkeydict">
<em class="property">class </em><code class="descclassname">chempy.util.pyutil.</code><code class="descname">defaultkeydict</code><a class="reference internal" href="_modules/chempy/util/pyutil.html#defaultkeydict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.pyutil.defaultkeydict" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">collections.defaultdict</span></code></p>
<p>defaultdict where default_factory should have the signature key -&gt; value</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">defaultkeydict</span><span class="p">(</span><span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span class="s1">&#39;[</span><span class="si">%s</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="n">k</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;[a]&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;[B]&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
<span class="go">&#39;[a]&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span>
<span class="go">&#39;[B]&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">]</span>
<span class="go">&#39;[c]&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="chempy.util.pyutil.defaultnamedtuple">
<code class="descclassname">chempy.util.pyutil.</code><code class="descname">defaultnamedtuple</code><span class="sig-paren">(</span><em>typename</em>, <em>field_names</em>, <em>defaults=()</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/pyutil.html#defaultnamedtuple"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.pyutil.defaultnamedtuple" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a new subclass of tuple with default values.</p>
<dl class="docutils">
<dt>typename <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>The name of the class.</dd>
<dt>field_names <span class="classifier-delimiter">:</span> <span class="classifier">str or iterable</span></dt>
<dd>An iterable of splitable string.</dd>
<dt>defaults <span class="classifier-delimiter">:</span> <span class="classifier">iterable</span></dt>
<dd>Default values for <code class="docutils literal"><span class="pre">field_names</span></code>, counting <code class="docutils literal"><span class="pre">[-len(defaults):]</span></code>.</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Body</span> <span class="o">=</span> <span class="n">defaultnamedtuple</span><span class="p">(</span><span class="s1">&#39;Body&#39;</span><span class="p">,</span> <span class="s1">&#39;x y z density&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Body</span><span class="o">.</span><span class="vm">__doc__</span>
<span class="go">&#39;Body(x, y, z, density)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Body</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()</span>
<span class="go">OrderedDict([(&#39;x&#39;, 10), (&#39;y&#39;, 5), (&#39;z&#39;, 3), (&#39;density&#39;, 1.0)])</span>
</pre></div>
</div>
<p>A new tuple subclass named <code class="docutils literal"><span class="pre">typename</span></code></p>
</dd></dl>

<dl class="function">
<dt id="chempy.util.pyutil.deprecated">
<code class="descclassname">chempy.util.pyutil.</code><code class="descname">deprecated</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/pyutil.html#deprecated"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.pyutil.deprecated" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper to <code class="xref py py-class docutils literal"><span class="pre">Deprecation</span></code> for using ChemPyDeprecationWarning.</p>
</dd></dl>

<dl class="function">
<dt id="chempy.util.pyutil.memoize">
<code class="descclassname">chempy.util.pyutil.</code><code class="descname">memoize</code><span class="sig-paren">(</span><em>max_nargs=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/pyutil.html#memoize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.pyutil.memoize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-chempy.util.regression">
<span id="chempy-util-regression-module"></span><h2>chempy.util.regression module<a class="headerlink" href="#module-chempy.util.regression" title="Permalink to this headline">¶</a></h2>
<p>Contains rudimentary tools for regression: (iteratively) (weighted) least squares
and functions for plotting the fit from the regression analysis.</p>
<dl class="function">
<dt id="chempy.util.regression.avg_params">
<code class="descclassname">chempy.util.regression.</code><code class="descname">avg_params</code><span class="sig-paren">(</span><em>opt_params</em>, <em>cov_params</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/regression.html#avg_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.regression.avg_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the average parameters from a set of regression parameters.</p>
<dl class="docutils">
<dt>opt_params <span class="classifier-delimiter">:</span> <span class="classifier">array_like</span></dt>
<dd>of shape (nfits, nparams)</dd>
<dt>cov_params <span class="classifier-delimiter">:</span> <span class="classifier">array_like</span></dt>
<dd>of shape (nfits, nparams, nparams)</dd>
</dl>
<p>avg_beta: weighted average of parameters
var_avg_beta: variance-covariance matrix</p>
</dd></dl>

<dl class="function">
<dt id="chempy.util.regression.irls">
<code class="descclassname">chempy.util.regression.</code><code class="descname">irls</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>w_cb=&lt;function &lt;lambda&gt;&gt;</em>, <em>itermax=16</em>, <em>rmsdwtol=1e-08</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/regression.html#irls"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.regression.irls" title="Permalink to this definition">¶</a></dt>
<dd><p>Iteratively reweighted least squares</p>
<p>x : array_like
y : array_like
w_cb : callbable</p>
<blockquote>
<div><p>Weight callback, signature <code class="docutils literal"><span class="pre">(x,</span> <span class="pre">y,</span> <span class="pre">beta,</span> <span class="pre">cov)</span> <span class="pre">-&gt;</span> <span class="pre">weight</span></code>.
Predefined:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">irls.ones</span></code>: unit weights (default)</li>
<li><code class="docutils literal"><span class="pre">irls.exp</span></code>: </li>
<li><code class="docutils literal"><span class="pre">irls.gaussian</span></code>: </li>
<li><code class="docutils literal"><span class="pre">irls.abs_residuals</span></code>: </li>
</ul>
</div></blockquote>
</div></blockquote>
<p>itermax : int
rmsdwtol : float
plot_cb : callble</p>
<blockquote>
<div>See <a class="reference internal" href="#chempy.util.regression.least_squares" title="chempy.util.regression.least_squares"><code class="xref py py-func docutils literal"><span class="pre">least_squares()</span></code></a></div></blockquote>
<dl class="docutils">
<dt>plot_cb_kwargs <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd>See <a class="reference internal" href="#chempy.util.regression.least_squares" title="chempy.util.regression.least_squares"><code class="xref py py-func docutils literal"><span class="pre">least_squares()</span></code></a></dd>
</dl>
<dl class="docutils">
<dt>beta <span class="classifier-delimiter">:</span> <span class="classifier">length-2 array</span></dt>
<dd>parameters</dd>
<dt>cov <span class="classifier-delimiter">:</span> <span class="classifier">2x2 array</span></dt>
<dd>variance-covariance matrix</dd>
<dt>info <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><dl class="first last docutils">
<dt>Contains</dt>
<dd><ul class="first last simple">
<li>success : bool</li>
<li>niter : int</li>
<li>weights : list of weighting arrays</li>
</ul>
</dd>
</dl>
</dd>
</dl>
<p># Examples
# ——–
# beta, cov, info = irls([1, 2, 3], [3, 2.5, 2.1], irls.abs_residuals)</p>
</dd></dl>

<dl class="function">
<dt id="chempy.util.regression.irls_units">
<code class="descclassname">chempy.util.regression.</code><code class="descname">irls_units</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/regression.html#irls_units"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.regression.irls_units" title="Permalink to this definition">¶</a></dt>
<dd><p>Units aware version of <a class="reference internal" href="#chempy.util.regression.irls" title="chempy.util.regression.irls"><code class="xref py py-func docutils literal"><span class="pre">irls()</span></code></a></p>
<p>x : array_like
y : array_like
**kwargs</p>
<blockquote>
<div>Keyword arguments passed on to <a class="reference internal" href="#chempy.util.regression.irls" title="chempy.util.regression.irls"><code class="xref py py-func docutils literal"><span class="pre">irls()</span></code></a></div></blockquote>
<ul class="simple">
<li><a class="reference internal" href="#chempy.util.regression.irls" title="chempy.util.regression.irls"><code class="xref py py-func docutils literal"><span class="pre">irls()</span></code></a></li>
</ul>
</dd></dl>

<dl class="function">
<dt id="chempy.util.regression.least_squares">
<code class="descclassname">chempy.util.regression.</code><code class="descname">least_squares</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>w=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/regression.html#least_squares"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.regression.least_squares" title="Permalink to this definition">¶</a></dt>
<dd><p>Least-squares (w or w/o weights) fit to data series.</p>
<p>Linear regression (unweighted or weighted).</p>
<p>x : array_like
y : array_like
w : array_like, optional</p>
<p>length 2 tuple : pair of parameter estimates (intercept and slope)
2x2 array : variance-covariance matrix
float : R-squared (goodness of fit)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">beta</span><span class="p">,</span> <span class="n">vcv</span><span class="p">,</span> <span class="n">R2</span> <span class="o">=</span> <span class="n">least_squares</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">all</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">beta</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]))</span> <span class="o">&lt;</span> <span class="mf">1e-14</span><span class="p">),</span> <span class="n">R2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">vcv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-14</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">(True, True, True)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b1</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">r2_1</span> <span class="o">=</span> <span class="n">least_squares</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b2</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">r2_2</span> <span class="o">=</span> <span class="n">least_squares</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">.</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">(</span><span class="n">b2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">b1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Wikipedia &amp; standard texts on least sqaures method.
Comment regarding R2 in WLS:</p>
<blockquote>
<div>Willett, John B., and Judith D. Singer. “Another cautionary note about R 2:
Its use in weighted least-squares regression analysis.”
The American Statistician 42.3 (1988): 236-238.</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="chempy.util.regression.least_squares_units">
<code class="descclassname">chempy.util.regression.</code><code class="descname">least_squares_units</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>w=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/regression.html#least_squares_units"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.regression.least_squares_units" title="Permalink to this definition">¶</a></dt>
<dd><p>Units-aware least-squares (w or w/o weights) fit to data series.</p>
<p>x : array_like
y : array_like
w : array_like, optional</p>
<ul class="simple">
<li><a class="reference internal" href="#chempy.util.regression.least_squares" title="chempy.util.regression.least_squares"><code class="xref py py-func docutils literal"><span class="pre">least_squares()</span></code></a></li>
</ul>
</dd></dl>

<dl class="function">
<dt id="chempy.util.regression.plot_avg_params">
<code class="descclassname">chempy.util.regression.</code><code class="descname">plot_avg_params</code><span class="sig-paren">(</span><em>opt_params</em>, <em>cov_params</em>, <em>avg_params_result</em>, <em>label_cb=None</em>, <em>ax=None</em>, <em>title=False</em>, <em>xlabel=False</em>, <em>ylabel=False</em>, <em>flip=False</em>, <em>nsigma=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/regression.html#plot_avg_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.regression.plot_avg_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the average parameters from a set of regression parameters</p>
<dl class="docutils">
<dt>opt_params <span class="classifier-delimiter">:</span> <span class="classifier">array_like</span></dt>
<dd>Of shape <code class="docutils literal"><span class="pre">(nfits,</span> <span class="pre">nparams)</span></code>.</dd>
<dt>cov_params <span class="classifier-delimiter">:</span> <span class="classifier">array_like</span></dt>
<dd>of shape (nfits, nparams, nparams)</dd>
<dt>avg_params_result <span class="classifier-delimiter">:</span> <span class="classifier">length-2 tuple</span></dt>
<dd>Result from <code class="xref py py-func docutils literal"><span class="pre">avg_parrams()</span></code>.</dd>
<dt>label_cb <span class="classifier-delimiter">:</span> <span class="classifier">callable</span></dt>
<dd>signature (beta, variance_beta) -&gt; str</dd>
</dl>
<p>ax : matplotlib.axes.Axes
title : bool or str
xlabel : bool or str
ylabel : bool or str
flip : bool</p>
<blockquote>
<div>for plotting: (x, y) -&gt; beta1, beta0</div></blockquote>
<dl class="docutils">
<dt>nsigma <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>Multiplier for error bars</dd>
</dl>
<p>avg_beta: weighted average of parameters
var_avg_beta: variance-covariance matrix</p>
</dd></dl>

<dl class="function">
<dt id="chempy.util.regression.plot_fit">
<code class="descclassname">chempy.util.regression.</code><code class="descname">plot_fit</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>beta</em>, <em>yerr=None</em>, <em>vcv_beta=None</em>, <em>r2=None</em>, <em>kw_data=None</em>, <em>kw_fit=None</em>, <em>fit_label_cb=None</em>, <em>ax=True</em>, <em>x_unit=1</em>, <em>y_unit=1</em>, <em>nsigma=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/regression.html#plot_fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.regression.plot_fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the result of a fit</p>
<p>x : array_like
y : array_like
beta : array_like
yerr : array_like
vcv_beta : array_like
kw_data : dict</p>
<blockquote>
<div>Keyword arguments to <code class="docutils literal"><span class="pre">plot</span></code> for x, y data</div></blockquote>
<dl class="docutils">
<dt>kw_fit <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd>Keyword arguments to <code class="docutils literal"><span class="pre">plot</span></code> for fitted data</dd>
<dt>fit_label_cb: callable:</dt>
<dd>signature (beta, variance_beta, r2) -&gt; str</dd>
<dt>ax <span class="classifier-delimiter">:</span> <span class="classifier">matplotlib.axes.Axes</span></dt>
<dd>Alternatively <code class="docutils literal"><span class="pre">True</span></code> or <code class="docutils literal"><span class="pre">None</span></code></dd>
</dl>
<p>x_unit : unit
y_unit : unit
nsigma : int</p>
<blockquote>
<div>Multiplier for errorbars when plotting.</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="chempy.util.regression.plot_least_squares_fit">
<code class="descclassname">chempy.util.regression.</code><code class="descname">plot_least_squares_fit</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>beta_vcv_r2</em>, <em>yerr=None</em>, <em>plot_cb=None</em>, <em>plot_cb_kwargs=None</em>, <em>x_unit=1</em>, <em>y_unit=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/regression.html#plot_least_squares_fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.regression.plot_least_squares_fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs Least-squares fit and plots data and fitted line</p>
<p>x : array_like
y : array_like
beta_vcv_r2 : tuple</p>
<blockquote>
<div>Result from <code class="xref py py-func docutils literal"><span class="pre">least_squares_fit()</span></code>.</div></blockquote>
<dl class="docutils">
<dt>plot_cb <span class="classifier-delimiter">:</span> <span class="classifier">callable</span></dt>
<dd>When <code class="docutils literal"><span class="pre">None</span></code>: uses <a class="reference internal" href="#chempy.util.regression.plot_fit" title="chempy.util.regression.plot_fit"><code class="xref py py-func docutils literal"><span class="pre">plot_fit()</span></code></a>, when callable:
signature <code class="docutils literal"><span class="pre">(x,</span> <span class="pre">y,</span> <span class="pre">beta,</span> <span class="pre">yerr=None,</span> <span class="pre">fit_label_cb=lambda</span> <span class="pre">beta,</span> <span class="pre">vcv,</span> <span class="pre">r2:</span> <span class="pre">'None')</span> <span class="pre">-&gt;</span> <span class="pre">str</span></code>.</dd>
<dt>plot_cb_kwargs: dict, optional</dt>
<dd>Keyword arguments passed on to <code class="docutils literal"><span class="pre">plot_cb</span></code> (see <a class="reference internal" href="#chempy.util.regression.plot_fit" title="chempy.util.regression.plot_fit"><code class="xref py py-func docutils literal"><span class="pre">plot_fit()</span></code></a> for list of
expected kwargs). If <code class="docutils literal"><span class="pre">plot_cb</span></code> is <code class="docutils literal"><span class="pre">True</span></code> it will be populated with defaults
(kw_data, fit_label_cb, x_unit, y_unit).</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-chempy.util.stoich">
<span id="chempy-util-stoich-module"></span><h2>chempy.util.stoich module<a class="headerlink" href="#module-chempy.util.stoich" title="Permalink to this headline">¶</a></h2>
<p>Utility functions related to stoichiometry.</p>
<dl class="function">
<dt id="chempy.util.stoich.decompose_yields">
<code class="descclassname">chempy.util.stoich.</code><code class="descname">decompose_yields</code><span class="sig-paren">(</span><em>yields</em>, <em>rxns</em>, <em>atol=1e-10</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/stoich.html#decompose_yields"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.stoich.decompose_yields" title="Permalink to this definition">¶</a></dt>
<dd><p>Decomposes yields into mass-action reactions</p>
<p>This function offers a way to express a reaction with non-integer
stoichiometric coefficients as a linear combination of production reactions
with integer coefficients.</p>
<p>Ak = y</p>
<p>A is (n_species x n_reactions) matrix, k is “rate coefficient”, y is yields</p>
<dl class="docutils">
<dt>yields: OrderedDict</dt>
<dd>specie names as keys and yields as values</dd>
<dt>rxns: iterable <code class="xref py py-class docutils literal"><span class="pre">Reaction</span></code> instances</dt>
<dd>dict keys must match those of <code class="docutils literal"><span class="pre">yields</span></code> each pair
of dictionaries gives stoichiometry
(1st is reactant, 2nd is products)</dd>
<dt>atol: float</dt>
<dd>absolute tolerance for residuals</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">chempy</span> <span class="k">import</span> <span class="n">Reaction</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h2a</span> <span class="o">=</span> <span class="n">Reaction</span><span class="p">({</span><span class="s1">&#39;H2O&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;H2&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h2b</span> <span class="o">=</span> <span class="n">Reaction</span><span class="p">({</span><span class="s1">&#39;H2O&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;H2&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;H2O2&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="n">inact_reac</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;H2O&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decompose_yields</span><span class="p">({</span><span class="s1">&#39;H2&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;H2O2&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">[</span><span class="n">h2a</span><span class="p">,</span> <span class="n">h2b</span><span class="p">])</span>
<span class="go">array([ 2.,  1.])</span>
</pre></div>
</div>
<dl class="docutils">
<dt>ValueError</dt>
<dd>When atol is exceeded</dd>
<dt>numpy.LinAlgError</dt>
<dd>When numpy.linalg.lstsq fails to converge</dd>
</dl>
<p>1-dimensional array of effective rate coefficients.</p>
</dd></dl>

<dl class="function">
<dt id="chempy.util.stoich.get_coeff_mtx">
<code class="descclassname">chempy.util.stoich.</code><code class="descname">get_coeff_mtx</code><span class="sig-paren">(</span><em>substances</em>, <em>stoichs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/stoich.html#get_coeff_mtx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.stoich.get_coeff_mtx" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a net stoichiometry matrix from reactions
described by pairs of dictionaries.</p>
<p>substances: sequence of keys in stoichs dict pairs
stoichs: sequence of pairs of dicts</p>
<blockquote>
<div>pairs of reactant and product dicts mapping substance keys
to stoichiometric coefficients (integers)</div></blockquote>
<p>2 dimensional array of shape (len(substances), len(stoichs))</p>
</dd></dl>

</div>
<div class="section" id="module-chempy.util.table">
<span id="chempy-util-table-module"></span><h2>chempy.util.table module<a class="headerlink" href="#module-chempy.util.table" title="Permalink to this headline">¶</a></h2>
<p>Convenience functions for presenting reaction systems in tables.</p>
<dl class="function">
<dt id="chempy.util.table.render_tex_to_pdf">
<code class="descclassname">chempy.util.table.</code><code class="descname">render_tex_to_pdf</code><span class="sig-paren">(</span><em>contents</em>, <em>texfname</em>, <em>pdffname</em>, <em>output_dir</em>, <em>save</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/table.html#render_tex_to_pdf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.table.render_tex_to_pdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a pdf from a tex file by calling pdflatex</p>
<p>contents : str
texfname : path
pdffname : path
output_dir : path
save : path or bool or str(bool)</p>
</dd></dl>

<dl class="function">
<dt id="chempy.util.table.rsys2pdf_table">
<code class="descclassname">chempy.util.table.</code><code class="descname">rsys2pdf_table</code><span class="sig-paren">(</span><em>rsys</em>, <em>output_dir=None</em>, <em>doc_template=None</em>, <em>doc_template_dict=None</em>, <em>save=True</em>, <em>landscape=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/table.html#rsys2pdf_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.table.rsys2pdf_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to render a ReactionSystem as
e.g. a pdf using e.g. pdflatex.</p>
<p>rsys : ReactionSystem
output_dir : path to output directory</p>
<blockquote>
<div>(default: system’s temporary folder)</div></blockquote>
<dl class="docutils">
<dt>doc_template <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>LaTeX boiler plate temlpate including preamble,
document environment etc.</dd>
<dt>doc_template_dict <span class="classifier-delimiter">:</span> <span class="classifier">dict (string -&gt; string)</span></dt>
<dd>dict used to render temlpate (excl. ‘table’)</dd>
<dt>longtable <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>use longtable in defaults. (default: False)</dd>
<dt><a href="#id1"><span class="problematic" id="id2">**</span></a>kwargs :</dt>
<dd>passed on to <cite>rsys2table</cite></dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="chempy.util.table.rsys2table">
<code class="descclassname">chempy.util.table.</code><code class="descname">rsys2table</code><span class="sig-paren">(</span><em>rsys</em>, <em>table_template=None</em>, <em>table_template_dict=None</em>, <em>param_name='Rate constant'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/table.html#rsys2table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.table.rsys2table" title="Permalink to this definition">¶</a></dt>
<dd><p>Renders user provided table_template with table_template_dict which
also has ‘body’ entry generated from <cite>rsys2tablines</cite>.</p>
<p>Defaults is LaTeX table requiring booktabs package to be used
(add usepackage{booktabs} to preamble).</p>
<p>rsys : ReactionSystem
table_template : string
table_tempalte_dict : dict used to render table_template (excl. “body”)
param_name : str</p>
<blockquote>
<div>Column header for parameter column</div></blockquote>
<dl class="docutils">
<dt>longtable <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>use longtable in defaults. (default: False)</dd>
<dt><a href="#id3"><span class="problematic" id="id4">**</span></a>kwargs :</dt>
<dd>passed onto rsys2tablines</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="chempy.util.table.rsys2tablines">
<code class="descclassname">chempy.util.table.</code><code class="descname">rsys2tablines</code><span class="sig-paren">(</span><em>rsys</em>, <em>rref0=1</em>, <em>coldelim=' &amp; '</em>, <em>tex=True</em>, <em>ref_fmt=None</em>, <em>unit_registry=None</em>, <em>unit_fmt='{}'</em>, <em>k_fmt='%.4g'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/table.html#rsys2tablines"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.table.rsys2tablines" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a table representation of a ReactionSystem.</p>
<p>rsys : ReactionSystem
rref0 : integer</p>
<blockquote>
<div>default start of index counter (default: 1)</div></blockquote>
<dl class="docutils">
<dt>coldelim <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>column delimiter (default: ‘ &amp; ‘)</dd>
<dt>tex <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>use latex formated output (default: True)</dd>
<dt>ref_fmt <span class="classifier-delimiter">:</span> <span class="classifier">string or callable</span></dt>
<dd>format string of <code class="docutils literal"><span class="pre">ref</span></code> attribute of reactions</dd>
<dt>unit_registry <span class="classifier-delimiter">:</span> <span class="classifier">unit registry</span></dt>
<dd>optional (default: None)</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-chempy.util.testing">
<span id="chempy-util-testing-module"></span><h2>chempy.util.testing module<a class="headerlink" href="#module-chempy.util.testing" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="chempy.util.testing.requires">
<em class="property">class </em><code class="descclassname">chempy.util.testing.</code><code class="descname">requires</code><span class="sig-paren">(</span><em>*reqs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chempy/util/testing.html#requires"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chempy.util.testing.requires" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Conditional skipping (on requirements) of tests in pytest</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@requires</span><span class="p">(</span><span class="s1">&#39;numpy&#39;</span><span class="p">,</span> <span class="s1">&#39;scipy&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">test_sqrt</span><span class="p">():</span>
<span class="gp">... </span>    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">... </span>    <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
<span class="gp">... </span>    <span class="kn">from</span> <span class="nn">scipy.special</span> <span class="k">import</span> <span class="n">zeta</span>
<span class="gp">... </span>    <span class="k">assert</span> <span class="n">zeta</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@requires</span><span class="p">(</span><span class="s1">&#39;numpy&gt;=1.9.0&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">test_nanmedian</span><span class="p">():</span>
<span class="gp">... </span>    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">... </span>    <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">10.0</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="gp">... </span>    <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">... </span>    <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmedian</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>
<span class="gp">...</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="chempy.thermodynamics.html" class="btn btn-neutral" title="chempy.thermodynamics package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Bjoern I. Dahlgren &lt;bjodah@gmail.com&gt;.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.5.6',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>